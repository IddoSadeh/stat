

<!DOCTYPE html>


<html >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>9. Rank Sum Test &#8212; My Statistics Book</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'nonpara/2ranksumtest';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="10. Kruskal-Wallis Test" href="3kruskaltest.html" />
    <link rel="prev" title="8. The Sign Test" href="1signtest.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="None"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../0intro.html">
  
  
  
  
  
    <p class="title logo__title">My Statistics Book</p>
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../0intro.html">
                    Welcome!
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Basics</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../Basics/1statintro.html">1. Introduction to Data Analysis</a></li>

<li class="toctree-l1"><a class="reference internal" href="../Basics/2sampling.html">3. Sampling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Basics/3prob.html">4. Probability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Basics/4ranvar.html">5. Random Variables and Probability Distributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Basics/5lin.html">6. Linear Relationships</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Basics/6inf.html">7. Inference</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Nonparametric Methods</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="1signtest.html">8. The Sign Test</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">9. Rank Sum Test</a></li>
<li class="toctree-l1"><a class="reference internal" href="3kruskaltest.html">10. Kruskal-Wallis Test</a></li>
<li class="toctree-l1"><a class="reference internal" href="4permtest.html">11. Permutation Tests</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2Fnonpara/2ranksumtest.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/nonpara/2ranksumtest.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Rank Sum Test</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#alternative-formulation">9.1. Alternative Formulation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#applications-and-special-cases">9.2. Applications and Special Cases</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#methods-to-determine-w-x-under-h-0">9.3. Methods to Determine <span class="math notranslate nohighlight">\(W_X\)</span> Under <span class="math notranslate nohighlight">\(H_0\)</span></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#handling-ties">9.4. Handling Ties</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#additional-notes">9.5. Additional Notes</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#software-tools">9.6. Software Tools</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example">9.7. Example</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#modified-scenario-and-data">9.7.1. Modified Scenario and Data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#questions-and-answers">9.7.2. Questions and Answers</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#discuss-the-data-and-issues">9.7.2.1. 1. Discuss the Data and Issues</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#null-hypothesis">9.7.2.2. 2. Null Hypothesis</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#one-sided-or-two-sided-test">9.7.2.3. 3. One-sided or Two-sided Test</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#appropriate-tests">9.7.2.4. 4. Appropriate Tests</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#replacing-data-with-ranks">9.7.2.5. 5. Replacing Data with Ranks</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#sum-of-ranks">9.7.2.6. 6. Sum of Ranks</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#inconsistency-with-null-hypothesis">9.7.2.7. 7. Inconsistency with Null Hypothesis</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#number-of-ways-to-label">9.7.2.8. 8. Number of Ways to Label</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#computing-the-p-value">9.7.2.9. 9. Computing the <span class="math notranslate nohighlight">\( p \)</span>-value</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusion">9.7.2.10. 10. Conclusion</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#larger-sample-sizes">9.7.2.11. 11. Larger Sample Sizes</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction-to-the-wilcoxon-rank-sum-test">9.7.2.12. 12. Introduction to the Wilcoxon Rank Sum Test</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#recap-of-the-activity">9.7.2.13. 13. Recap of the Activity</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#r-notes">9.7.2.14. 14. R Notes</a></li>
</ul>
</li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <div class="tex2jax_ignore mathjax_ignore section" id="rank-sum-test">
<h1><span class="section-number">9. </span>Rank Sum Test<a class="headerlink" href="#rank-sum-test" title="Permalink to this headline">#</a></h1>
<p>The Rank Sum Test, often denoted by <span class="math notranslate nohighlight">\(W\)</span>, is a two-sample statistical procedure aimed at evaluating whether two samples originate from the same distribution. Given two samples <span class="math notranslate nohighlight">\(x_1, x_2, \ldots, x_m\)</span> from distribution <span class="math notranslate nohighlight">\(F_X\)</span> and <span class="math notranslate nohighlight">\(y_1, y_2, \ldots, y_n\)</span> from <span class="math notranslate nohighlight">\(F_Y\)</span>, the null hypothesis <span class="math notranslate nohighlight">\(H_0\)</span> is that <span class="math notranslate nohighlight">\(F_X = F_Y\)</span>.</p>
<p>To perform the test, combine both samples into a single set of <span class="math notranslate nohighlight">\(n+m\)</span> elements and assign ranks to each, from the smallest (rank 1) to the largest (rank <span class="math notranslate nohighlight">\(n+m\)</span>). Compute:</p>
<p><span class="math notranslate nohighlight">\(
W_X = \sum_{i=1}^{m} R_i^X
\)</span></p>
<p>Here, <span class="math notranslate nohighlight">\(R_i^X\)</span> are the ranks of the <span class="math notranslate nohighlight">\(x\)</span> observations in the combined sample. Under <span class="math notranslate nohighlight">\(H_0\)</span>, <span class="math notranslate nohighlight">\(W_X\)</span> is essentially the sum of <span class="math notranslate nohighlight">\(m\)</span> randomly selected integers from the set <span class="math notranslate nohighlight">\(1, 2, \ldots, n+m\)</span>.</p>
<div class="section" id="alternative-formulation">
<h2><span class="section-number">9.1. </span>Alternative Formulation<a class="headerlink" href="#alternative-formulation" title="Permalink to this headline">#</a></h2>
<p>It’s also possible to use <span class="math notranslate nohighlight">\(W_Y\)</span>, the sum of ranks for the <span class="math notranslate nohighlight">\(y\)</span> sample, as both <span class="math notranslate nohighlight">\(W_X\)</span> and <span class="math notranslate nohighlight">\(W_Y\)</span> are related:</p>
<p><span class="math notranslate nohighlight">\(
W_X + W_Y = \frac{(n+m)(n+m+1)}{2}
\)</span></p>
</div>
<div class="section" id="applications-and-special-cases">
<h2><span class="section-number">9.2. </span>Applications and Special Cases<a class="headerlink" href="#applications-and-special-cases" title="Permalink to this headline">#</a></h2>
<p>The Rank Sum Test is particularly useful for detecting shifts between two distributions. For instance, if <span class="math notranslate nohighlight">\(F_Y(x) = F_X(x - \theta)\)</span>, then you’re testing <span class="math notranslate nohighlight">\(H_0: \theta = 0\)</span> against various alternatives.</p>
</div>
<div class="section" id="methods-to-determine-w-x-under-h-0">
<h2><span class="section-number">9.3. </span>Methods to Determine <span class="math notranslate nohighlight">\(W_X\)</span> Under <span class="math notranslate nohighlight">\(H_0\)</span><a class="headerlink" href="#methods-to-determine-w-x-under-h-0" title="Permalink to this headline">#</a></h2>
<ol class="arabic simple">
<li><p>Enumerate all possible combinations, which number <span class="math notranslate nohighlight">\(\binom{n+m}{m}\)</span>. Then, find the probabilities for each possible value of <span class="math notranslate nohighlight">\(W_X\)</span> under <span class="math notranslate nohighlight">\(H_0\)</span>.</p></li>
<li><p>Critical value tables are available for reference.</p></li>
<li><p>For sufficiently large <span class="math notranslate nohighlight">\(m\)</span> and <span class="math notranslate nohighlight">\(n\)</span>, <span class="math notranslate nohighlight">\(W_X\)</span> can be approximated by a normal distribution:</p></li>
</ol>
<p><span class="math notranslate nohighlight">\(
W_X \approx N\left(\frac{m(n+m+1)}{2}, \frac{mn(n+m+1)}{12}\right)
\)</span></p>
</div>
<div class="section" id="handling-ties">
<h2><span class="section-number">9.4. </span>Handling Ties<a class="headerlink" href="#handling-ties" title="Permalink to this headline">#</a></h2>
<p>If there are tied observations, average ranks can be used. Some statistical software adjusts the variance of <span class="math notranslate nohighlight">\(W_X\)</span> to account for ties, making the test more conservative.</p>
</div>
<div class="section" id="additional-notes">
<h2><span class="section-number">9.5. </span>Additional Notes<a class="headerlink" href="#additional-notes" title="Permalink to this headline">#</a></h2>
<ol class="arabic simple">
<li><p>The test may not yield an exact significance level due to the discrete nature of the test statistic.</p></li>
<li><p>Misuse can occur if the underlying distributions for <span class="math notranslate nohighlight">\(W_X\)</span> and <span class="math notranslate nohighlight">\(W_Y\)</span> are not the same when sample sizes are equal.</p></li>
</ol>
</div>
<div class="section" id="software-tools">
<h2><span class="section-number">9.6. </span>Software Tools<a class="headerlink" href="#software-tools" title="Permalink to this headline">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">wilcox.test</span></code> function in R can be used to perform this test, and the <code class="docutils literal notranslate"><span class="pre">wilcox.exact</span></code> function in the <code class="docutils literal notranslate"><span class="pre">exactRankTests</span></code> package is particularly useful when there are ties in the data.</p>
</div>
<div class="section" id="example">
<h2><span class="section-number">9.7. </span>Example<a class="headerlink" href="#example" title="Permalink to this headline">#</a></h2>
<p>We’ll consider a hypothetical case where employees are divided into two departments, A and B, and we’re looking at the time it takes for employees to get their first raise.</p>
<div class="section" id="modified-scenario-and-data">
<h3><span class="section-number">9.7.1. </span>Modified Scenario and Data<a class="headerlink" href="#modified-scenario-and-data" title="Permalink to this headline">#</a></h3>
<p>In a hypothetical case, Smith Corp. v. Employees, the plaintiff claims that employees in Department A are discriminated against in terms of the time it takes to receive their first raise. The data below, which show times (in months) from hiring to first raise, split by department, are used as evidence:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Department</p></th>
<th class="head"><p>Times to Promotion (in months)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Department A</p></td>
<td><p>5, 7, 12, 14, 18, 21, 22, 23, 24, 25</p></td>
</tr>
<tr class="row-odd"><td><p>Department B</p></td>
<td><p>7, 12, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="questions-and-answers">
<h3><span class="section-number">9.7.2. </span>Questions and Answers<a class="headerlink" href="#questions-and-answers" title="Permalink to this headline">#</a></h3>
<div class="section" id="discuss-the-data-and-issues">
<h4><span class="section-number">9.7.2.1. </span>1. Discuss the Data and Issues<a class="headerlink" href="#discuss-the-data-and-issues" title="Permalink to this headline">#</a></h4>
<p><strong>Original Question</strong>: What is the question being posed by the plaintiff with regards to the data?</p>
<p>The plaintiff is asking whether the data appear consistent with the suggestion that the distributions of times to first raise in the company are the same for the two departments. The plaintiff implies that Department A is discriminated against.</p>
</div>
<div class="section" id="null-hypothesis">
<h4><span class="section-number">9.7.2.2. </span>2. Null Hypothesis<a class="headerlink" href="#null-hypothesis" title="Permalink to this headline">#</a></h4>
<p><strong>Original Question</strong>: In constructing a test for these data, what would be your null hypothesis?</p>
<p>The null hypothesis would be that the distributions of times to first raise are the same for both departments.</p>
</div>
<div class="section" id="one-sided-or-two-sided-test">
<h4><span class="section-number">9.7.2.3. </span>3. One-sided or Two-sided Test<a class="headerlink" href="#one-sided-or-two-sided-test" title="Permalink to this headline">#</a></h4>
<p><strong>Original Question</strong>: In conducting a hypothesis test here, would you take a one-sided or two-sided alternative? Does it matter?</p>
<p>A one-sided test seems appropriate, as the plaintiff is arguing that Department A has a longer time before receiving a raise compared to Department B.</p>
</div>
<div class="section" id="appropriate-tests">
<h4><span class="section-number">9.7.2.4. </span>4. Appropriate Tests<a class="headerlink" href="#appropriate-tests" title="Permalink to this headline">#</a></h4>
<p><strong>Original Question</strong>: Of the tests you have met in your introductory course, which would possibly be appropriate for the case here? What reservations might you have about applying that test to the data given?</p>
<p>A two-sample t-test could be considered, but the assumption of normality may not hold, especially given the small sample size for one of the groups.</p>
</div>
<div class="section" id="replacing-data-with-ranks">
<h4><span class="section-number">9.7.2.5. </span>5. Replacing Data with Ranks<a class="headerlink" href="#replacing-data-with-ranks" title="Permalink to this headline">#</a></h4>
<p><strong>Original Question</strong>: Rank the data smallest to largest, giving the smallest number rank 1, the largest rank 31. Re-write the table of data replacing the data by their ranks.</p>
<p>For Department A: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10<br />
For Department B: 2, 3, 4, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 31</p>
</div>
<div class="section" id="sum-of-ranks">
<h4><span class="section-number">9.7.2.6. </span>6. Sum of Ranks<a class="headerlink" href="#sum-of-ranks" title="Permalink to this headline">#</a></h4>
<p><strong>Original Question</strong>: The test is based on the sum of the ranks for one of the samples. Find the sum of the ranks for Department A, <span class="math notranslate nohighlight">\(W_{A}\)</span> say.</p>
<p>The sum of the ranks for Department A is <span class="math notranslate nohighlight">\(W_{A} = 55\)</span>.</p>
</div>
<div class="section" id="inconsistency-with-null-hypothesis">
<h4><span class="section-number">9.7.2.7. </span>7. Inconsistency with Null Hypothesis<a class="headerlink" href="#inconsistency-with-null-hypothesis" title="Permalink to this headline">#</a></h4>
<p><strong>Original Question</strong>: Keeping the sample sizes the same, consider changes to the department associated with each observation; if the null hypothesis were true, in how many ways could the outcomes have come out to be at least as inconsistent with the null hypothesis as that actually observed?</p>
<p>For <span class="math notranslate nohighlight">\(W_{A} = 55\)</span>, combinations that are as inconsistent are: <span class="math notranslate nohighlight">\( (45, 10) \)</span>, <span class="math notranslate nohighlight">\( (46, 9) \)</span>, <span class="math notranslate nohighlight">\( (47, 8) \)</span>, <span class="math notranslate nohighlight">\( (48, 7) \)</span>, <span class="math notranslate nohighlight">\( (49, 6) \)</span>, <span class="math notranslate nohighlight">\( (50, 5) \)</span>, <span class="math notranslate nohighlight">\( (51, 4) \)</span>, <span class="math notranslate nohighlight">\( (52, 3) \)</span>, <span class="math notranslate nohighlight">\( (53, 2) \)</span>, <span class="math notranslate nohighlight">\( (54, 1) \)</span>. So there are 10 ways that <span class="math notranslate nohighlight">\(W_{A} \geq 55\)</span>.</p>
</div>
<div class="section" id="number-of-ways-to-label">
<h4><span class="section-number">9.7.2.8. </span>8. Number of Ways to Label<a class="headerlink" href="#number-of-ways-to-label" title="Permalink to this headline">#</a></h4>
<p><strong>Original Question</strong>: How many ways are there to label 31 numbers so that 10 are “Department A” and 21 are “Department B”?</p>
<p>There are <span class="math notranslate nohighlight">\( \binom{31}{10} = 244,862,270 \)</span> ways to allocate the labels to the data points.</p>
</div>
<div class="section" id="computing-the-p-value">
<h4><span class="section-number">9.7.2.9. </span>9. Computing the <span class="math notranslate nohighlight">\( p \)</span>-value<a class="headerlink" href="#computing-the-p-value" title="Permalink to this headline">#</a></h4>
<p><strong>Original Question</strong>: How would you compute the <span class="math notranslate nohighlight">\( p \)</span>-value for the test based on the previous parts, assuming a one-sided alternative?</p>
<p>The <span class="math notranslate nohighlight">\( p \)</span>-value would be <span class="math notranslate nohighlight">\( \frac{10}{244,862,270} \)</span>.</p>
</div>
<div class="section" id="conclusion">
<h4><span class="section-number">9.7.2.10. </span>10. Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this headline">#</a></h4>
<p><strong>Original Question</strong>: What would you conclude about the hypothesis of interest? Would you have any reservations about your conclusion?</p>
<p>The <span class="math notranslate nohighlight">\( p \)</span>-value is extremely small, suggesting that the null hypothesis is unlikely. However, the sample size for Department A is smaller, which could be a limitation.</p>
</div>
<div class="section" id="larger-sample-sizes">
<h4><span class="section-number">9.7.2.11. </span>11. Larger Sample Sizes<a class="headerlink" href="#larger-sample-sizes" title="Permalink to this headline">#</a></h4>
<p><strong>Original Question</strong>: Suppose the two sample sizes had been much bigger - ten times bigger, say. Which distribution would this statistic approximately follow under the null hypothesis?</p>
<p>The test statistic <span class="math notranslate nohighlight">\( W_{A} \)</span> would approximately follow a Normal distribution under the null hypothesis, according to the Central Limit Theorem.</p>
<p>Certainly, let’s complete the activity sheet with questions 12-14.</p>
</div>
<div class="section" id="introduction-to-the-wilcoxon-rank-sum-test">
<h4><span class="section-number">9.7.2.12. </span>12. Introduction to the Wilcoxon Rank Sum Test<a class="headerlink" href="#introduction-to-the-wilcoxon-rank-sum-test" title="Permalink to this headline">#</a></h4>
<p><strong>Original Question</strong>: This activity introduces a test known as the Wilcoxon rank sum test. Like the sign test, this test makes no explicit assumption about the shapes of the distribution of the two data sets, and so it is also a nonparametric test. There are variants on this test, and a closely related test known as the Mann-Whitney test. These tests, which all share the idea explained in this activity, are alternatives to the two-sample <span class="math notranslate nohighlight">\( t \)</span> test. Such tests are preferable in cases where the data are clearly non-Normal and the sample size is small. Read the notes on the rank sum test from the course website.</p>
<p>Through this activity, we’ve learned about the Wilcoxon rank sum test, which is a nonparametric alternative to the two-sample <span class="math notranslate nohighlight">\( t \)</span> test. This test is particularly useful when the data are not Normally distributed or when the sample sizes are unequal or small. The test is based on the ranks of the data rather than their actual values, making it less sensitive to outliers and skewed distributions.</p>
</div>
<div class="section" id="recap-of-the-activity">
<h4><span class="section-number">9.7.2.13. </span>13. Recap of the Activity<a class="headerlink" href="#recap-of-the-activity" title="Permalink to this headline">#</a></h4>
<p><strong>Original Question</strong>: Re-cap what you have done during this activity. Why do you think you were asked to do this activity? What have you learned?</p>
<p>During this activity, we’ve gone through the steps of conducting a Wilcoxon rank sum test using a hypothetical scenario involving two departments in a company. We’ve learned how to rank data, calculate the sum of ranks for a sample, and compute a <span class="math notranslate nohighlight">\( p \)</span>-value to test a hypothesis. This activity helps us understand the utility of nonparametric tests, especially when the assumptions of parametric tests like the <span class="math notranslate nohighlight">\( t \)</span>-test are not met.</p>
</div>
<div class="section" id="r-notes">
<h4><span class="section-number">9.7.2.14. </span>14. R Notes<a class="headerlink" href="#r-notes" title="Permalink to this headline">#</a></h4>
<p><strong>Original Question</strong>: We can apply the Wilcoxon rank sum test in R in two ways. To reproduce closely the activity, we can use the function <code class="docutils literal notranslate"><span class="pre">wilcox.exact</span></code> available in the package <code class="docutils literal notranslate"><span class="pre">exactRankTests</span></code>, which is no longer being updated. However, it is now more common to use R function <code class="docutils literal notranslate"><span class="pre">wilcox.test</span></code>, which will generally give identical results, but will handle tied ranks differently.</p>
<p>To perform the Wilcoxon rank sum test in R, you can use either the <code class="docutils literal notranslate"><span class="pre">wilcox.exact</span></code> function from the <code class="docutils literal notranslate"><span class="pre">exactRankTests</span></code> package for an exact test or the more commonly used <code class="docutils literal notranslate"><span class="pre">wilcox.test</span></code> function for an approximate test. The latter is often preferred as it can handle tied ranks and is more widely supported. Both functions will provide you with a <span class="math notranslate nohighlight">\( p \)</span>-value that you can use to make a decision regarding your hypothesis.</p>
<p>Here’s how you might use <code class="docutils literal notranslate"><span class="pre">wilcox.test</span></code> in R:</p>
<div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="c1"># Data for Department A and B</span>
<span class="n">dept_a</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="m">7</span><span class="p">,</span><span class="w"> </span><span class="m">12</span><span class="p">,</span><span class="w"> </span><span class="m">14</span><span class="p">,</span><span class="w"> </span><span class="m">18</span><span class="p">,</span><span class="w"> </span><span class="m">21</span><span class="p">,</span><span class="w"> </span><span class="m">22</span><span class="p">,</span><span class="w"> </span><span class="m">23</span><span class="p">,</span><span class="w"> </span><span class="m">24</span><span class="p">,</span><span class="w"> </span><span class="m">25</span><span class="p">)</span>
<span class="n">dept_b</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">7</span><span class="p">,</span><span class="w"> </span><span class="m">12</span><span class="p">,</span><span class="w"> </span><span class="m">14</span><span class="p">,</span><span class="w"> </span><span class="m">15</span><span class="p">,</span><span class="w"> </span><span class="m">16</span><span class="p">,</span><span class="w"> </span><span class="m">17</span><span class="p">,</span><span class="w"> </span><span class="m">18</span><span class="p">,</span><span class="w"> </span><span class="m">19</span><span class="p">,</span><span class="w"> </span><span class="m">20</span><span class="p">,</span><span class="w"> </span><span class="m">21</span><span class="p">,</span><span class="w"> </span><span class="m">22</span><span class="p">,</span><span class="w"> </span><span class="m">23</span><span class="p">,</span><span class="w"> </span><span class="m">24</span><span class="p">,</span><span class="w"> </span><span class="m">25</span><span class="p">,</span><span class="w"> </span><span class="m">26</span><span class="p">,</span><span class="w"> </span><span class="m">27</span><span class="p">,</span><span class="w"> </span><span class="m">28</span><span class="p">,</span><span class="w"> </span><span class="m">29</span><span class="p">,</span><span class="w"> </span><span class="m">30</span><span class="p">,</span><span class="w"> </span><span class="m">31</span><span class="p">,</span><span class="w"> </span><span class="m">32</span><span class="p">)</span>

<span class="c1"># Perform the test</span>
<span class="n">result</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">wilcox.test</span><span class="p">(</span><span class="n">dept_a</span><span class="p">,</span><span class="w"> </span><span class="n">dept_b</span><span class="p">,</span><span class="w"> </span><span class="n">alternative</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;greater&quot;</span><span class="p">)</span>

<span class="c1"># Display the result</span>
<span class="nf">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
<p>This will output the <span class="math notranslate nohighlight">\( p \)</span>-value among other statistics, which you can then interpret to make your conclusion.</p>
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./nonpara"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="1signtest.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">8. </span>The Sign Test</p>
      </div>
    </a>
    <a class="right-next"
       href="3kruskaltest.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">10. </span>Kruskal-Wallis Test</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#alternative-formulation">9.1. Alternative Formulation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#applications-and-special-cases">9.2. Applications and Special Cases</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#methods-to-determine-w-x-under-h-0">9.3. Methods to Determine <span class="math notranslate nohighlight">\(W_X\)</span> Under <span class="math notranslate nohighlight">\(H_0\)</span></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#handling-ties">9.4. Handling Ties</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#additional-notes">9.5. Additional Notes</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#software-tools">9.6. Software Tools</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example">9.7. Example</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#modified-scenario-and-data">9.7.1. Modified Scenario and Data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#questions-and-answers">9.7.2. Questions and Answers</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#discuss-the-data-and-issues">9.7.2.1. 1. Discuss the Data and Issues</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#null-hypothesis">9.7.2.2. 2. Null Hypothesis</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#one-sided-or-two-sided-test">9.7.2.3. 3. One-sided or Two-sided Test</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#appropriate-tests">9.7.2.4. 4. Appropriate Tests</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#replacing-data-with-ranks">9.7.2.5. 5. Replacing Data with Ranks</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#sum-of-ranks">9.7.2.6. 6. Sum of Ranks</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#inconsistency-with-null-hypothesis">9.7.2.7. 7. Inconsistency with Null Hypothesis</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#number-of-ways-to-label">9.7.2.8. 8. Number of Ways to Label</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#computing-the-p-value">9.7.2.9. 9. Computing the <span class="math notranslate nohighlight">\( p \)</span>-value</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusion">9.7.2.10. 10. Conclusion</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#larger-sample-sizes">9.7.2.11. 11. Larger Sample Sizes</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction-to-the-wilcoxon-rank-sum-test">9.7.2.12. 12. Introduction to the Wilcoxon Rank Sum Test</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#recap-of-the-activity">9.7.2.13. 13. Recap of the Activity</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#r-notes">9.7.2.14. 14. R Notes</a></li>
</ul>
</li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Iddo Sadeh
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>